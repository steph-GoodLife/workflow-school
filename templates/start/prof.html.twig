{% extends 'base.html.twig' %}

{% block title %}MessageRequest - Validation des professeur
{% endblock %}

{% block body %}

	{% for label, message in app.flashes(['success']) %}
		{% for messages in message %}
			<div class="flash-{{ label }}">
				{{ messages }}
			</div>
		{% endfor %}
	{% endfor %}

	{% for messages in message %}

		<h2>{{messages.texte}}</h2>
        <p>Demande de {{ messages.utilisateur.email }}</p>

		{% if workflow_can(messages, 'to_prof_ok') %}
			<a type="button" class="btn btn-blue" href="{{ path('app_change', {'id': messages.id, 'to': 'to_prof_ok'}) }}">Le professeur valide</a>
		{% endif %}

        {% if workflow_can(messages, 'to_direct_ok') %}
			<a type="button" class="btn btn-blue" href="{{ path('app_change', {'id': messages.id, 'to': 'to_direct_ok'}) }}">La direction valide</a>
		{% endif %}

        {% if workflow_can(messages, 'to_order') %}
			<a type="button" class="btn btn-blue" href="{{ path('app_change', {'id': messages.id, 'to': 'to_order'}) }}">Générer le résultat</a>
		{% endif %}

        {% if workflow_can(messages, 'to_ordered') %}
			<a type="button" class="btn btn-blue" href="{{ path('app_change', {'id': messages.id, 'to': 'to_ordered'}) }}">Le résultat est en cours</a>
		{% endif %}

        {% if workflow_can(messages, 'to_received') %}
			<a type="button" class="btn btn-blue" href="{{ path('app_change', {'id': messages.id, 'to': 'to_received'}) }}">Valider la reception du résultat</a>
		{% endif %}

		<hr>

	{% endfor %}

{% endblock %}
